package application;

import java.sql.SQLException;
import java.util.List;
import java.util.Scanner;

import dao.AlunoDAO;
import dao.LivroDAO;
import dao.EmprestimoDAO;
import model.Aluno;
import model.Livro;

public class Program {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        
        try {
            // Exemplo de CRUD para Alunos
            System.out.println("==== CRUD ALUNO ====");
            List<Aluno> alunos = AlunoDAO.listarAlunos();
            alunos.forEach(System.out::println);
            
            // Exemplo de CRUD para Livros
            System.out.println("\n==== CRUD LIVRO ====");
            List<Livro> livros = LivroDAO.listarLivros();
            livros.forEach(System.out::println);
            
            // Emprestimo
            System.out.println("\n==== EMPRÉSTIMO DE LIVRO ====");
            System.out.print("Digite o ID do aluno: ");
            int idAluno = sc.nextInt();  // Captura o ID do aluno

            // Verifica se o aluno existe
            Aluno aluno = AlunoDAO.buscarPorId(idAluno);
            if (aluno == null) {
                System.out.println("Aluno não encontrado. Verifique o ID informado.");
                return; // Sai da execução caso o aluno não exista
            }

            System.out.print("Digite o ID do livro: ");
            int idLivro = sc.nextInt();  // Captura o ID do livro

            // Registra o empréstimo
            EmprestimoDAO.registrarEmprestimo(idAluno, idLivro);

        } catch (SQLException e) {
            System.out.println("Erro ao realizar operação: " + e.getMessage());
        } finally {
            sc.close();  // Fecha o scanner para liberar o recurso
        }
    }
}
